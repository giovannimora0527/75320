// LibroController.java
@GetMapping("/por-autor/{idAutor}")
public ResponseEntity<?> listarLibrosPorAutor(@PathVariable int idAutor) {
    try {
        List<Libro> libros = libroService.listarPorAutor(idAutor);
        return ResponseEntity.ok(libros);
    } catch (AutorNotFoundException e) {
        return ResponseEntity.notFound().build();
    }
}

// LibroService.java
public List<Libro> listarPorAutor(int idAutor) throws AutorNotFoundException {
    if (!autorRepository.existsById(idAutor)) {
        throw new AutorNotFoundException("Autor no encontrado");
    }
    return libroRepository.findByAutorId(idAutor);
}
