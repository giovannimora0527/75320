// UsuarioController.java
@GetMapping("/buscar-por-email")
public ResponseEntity<?> buscarPorEmail(@RequestParam String email) {
    try {
        Usuario usuario = usuarioService.buscarPorEmail(email);
        return ResponseEntity.ok(usuario);
    } catch (EmailFormatException e) {
        return ResponseEntity.badRequest().body("Formato de email inválido");
    } catch (NoSuchElementException e) {
        return ResponseEntity.notFound().build();
    }
}

// UsuarioService.java
public Usuario buscarPorEmail(String email) throws EmailFormatException {
    if (!email.matches("^[A-Za-z0-9+_.-]+@(.+)$")) {
        throw new EmailFormatException("Formato de email inválido");
    }
    return usuarioRepository.findByEmail(email)
            .orElseThrow(() -> new NoSuchElementException("Usuario no encontrado"));
}

// EmailFormatException.java
package com.biblioteca.exception;

public class EmailFormatException extends Exception {
    public EmailFormatException(String message) {
        super(message);
    }
}
